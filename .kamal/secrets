#!/usr/bin/env bash

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"

# Load environment variables from .env file
if [ -f "$PROJECT_DIR/.env" ]; then
  set -a
  source "$PROJECT_DIR/.env"
  set +a
fi

# Export secrets for Kamal to use
cat <<EOF
KAMAL_REGISTRY_PASSWORD=$KAMAL_REGISTRY_PASSWORD
POSTGRES_PASSWORD=$POSTGRES_PASSWORD
DATABASE_URL=$DATABASE_URL
APP_JWT_SECRET=$APP_JWT_SECRET
APP_SERVER_PORT=$APP_SERVER_PORT
APP_DATABASE_HOST=$APP_DATABASE_HOST
APP_DATABASE_PORT=$APP_DATABASE_PORT
APP_DATABASE_USER=$APP_DATABASE_USER
APP_DATABASE_PASSWORD=$APP_DATABASE_PASSWORD
APP_DATABASE_NAME=$APP_DATABASE_NAME
NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL
EOF
